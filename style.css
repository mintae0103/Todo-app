:root{
    --bg:#0f1115; --panel:#14161b; --text:#f7f7f7; --muted:#9aa0a6;
    --border:#222933; --accent:#3b82f6; --shadow:0 20px 40px rgba(0,0,0,.35);
    --sidebar-w: 260px; --top-h:56px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif}
  
  /* 레이아웃 */
  .app{
    min-height:100dvh;
    display:grid;
    grid-template-columns: var(--sidebar-w) 1fr;
    grid-template-rows: var(--top-h) 1fr;
    grid-template-areas:
      "topbar topbar"
      "sidebar main";
  }
  
  /* 상단바 */
  .topbar{
    grid-area:topbar; display:flex; align-items:center; gap:12px;
    padding:0 12px; border-bottom:1px solid var(--border); background:#10151f;
    position:sticky; top:0; z-index:50;
  }
  .brand{font-weight:700}
  .spacer{flex:1}
  .hamburger{
    width:44px;height:44px;display:none;align-items:center;justify-content:center;
    border:1px solid var(--border);border-radius:10px;background:#131a25;color:#f7f7f7;cursor:pointer;
  }
  
  /* 사이드바 */
  .sidebar{
    grid-area:sidebar; border-right:1px solid var(--border);
    background:var(--panel); padding:12px; display:flex; flex-direction:column; gap:10px;
  }
  .nav{display:flex; flex-direction:column; gap:6px; margin-top:8px}
  .nav a{
    display:flex; align-items:center; gap:10px; padding:12px;
    border-radius:10px; text-decoration:none; color:var(--text); border:1px solid transparent;
  }
  .nav a:hover{ background:#111823; border-color:var(--border) }
  .nav a.active{ background:#0f1b2e; border-color:#1e2a3d; outline:2px solid var(--accent) }
  
  /* 메인 */
  .main{ grid-area:main; padding:16px; overflow:auto }
  section.board{
    background:var(--panel); border:1px solid var(--border); border-radius:12px;
    padding:16px; min-height:320px; box-shadow:var(--shadow);
  }
  h2{margin:0 0 12px;font-size:18px}
  
  /* 툴바 */
  .todo-toolbar{
    display:flex; gap:8px; flex-wrap:wrap; align-items:center;
  }
  .todo-toolbar button{
    font-size:16px; padding:8px 14px; border-radius:10px;
  }
  button.primary{ background:#3b82f6; border-color:#3b82f6; color:#fff; }
  button.secondary{ background:#151a24; color:#f7f7f7; border:1px solid var(--border); }
  
  /* 오프캔버스(모바일) */
  .backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.5);
    opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:40;
  }
  .sidebar-drawer{
    position:fixed; top:var(--top-h); left:0; bottom:0; width:var(--sidebar-w);
    transform:translateX(-100%); transition:transform .2s ease; z-index:41;
    border-right:1px solid var(--border); background:var(--panel); padding:12px; display:none; flex-direction:column; gap:10px;
  }
  .sidebar-drawer .nav a{ padding:12px }
  
  /* 모달 & 폼(공통) */
  dialog{ border:0; padding:0; border-radius:12px; }
  .modal-body{
    background:#14161b; color:#f7f7f7; border:1px solid var(--border); border-radius:12px;
    padding:16px; min-width:min(92vw,520px);
  }
  .modal-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
  .modal-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
  label{ display:flex; flex-direction:column; gap:6px; margin:8px 0; }
  input, select, button{
    font-size:16px; padding:10px; border-radius:10px; border:1px solid var(--border); background:#11151e; color:#fff;
  }
  
  /* 팔레트 */
  .palette { display:flex; gap:8px; flex-wrap:wrap; }
  .palette button {
    width:32px; height:32px; border-radius:50%;
    border:2px solid transparent; cursor:pointer;
  }
  .palette button.selected { border-color:#fff; box-shadow:0 0 0 2px #000; }
  .palette .more { width:auto; min-width:40px; border-radius:10px; padding:0 10px; background:#151a24; color:#f7f7f7; }
  .visually-hidden{ position:absolute; left:-9999px; width:1px; height:1px; opacity:0; }
  
  /* 카테고리 관리 */
  .cat-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px }
  .hint{ color:#9aa0a6; font-size:12px; margin-top:10px }
  
  /* 토스트 */
  #toastHost{ position:fixed; top:16px; right:16px; display:flex; flex-direction:column; gap:8px; z-index:1000; }
  
  /* ===== 카드: 상단(체크/제목/삭제) + 하단 메타(날짜·카테고리) ===== */
  .task-row{
    overflow:hidden;
    display:grid;
    grid-template-columns: 44px 1fr 44px;
    grid-template-rows: auto auto;
    grid-template-areas:
      "check title del"
      "check meta  del";
    align-items:center;
    gap:6px 10px;
    border:1px solid var(--border);
    border-radius:12px;
    padding:10px;
    margin:6px 0;
    background:#11151e;
    touch-action:none;
  }
  .task-row .check{ grid-area:check; }
  .task-row .title{ grid-area:title; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  .task-row .del{ grid-area:del; justify-self:end; }
  .task-row .meta{ grid-area:meta; color:var(--muted); font-size:12px; display:flex; gap:8px; align-items:center; min-width:0; }
  .task-row .meta .dot{ width:10px; height:10px; border-radius:50%; display:inline-block; }
  .task-row .meta .cat-name{ max-width:40vw; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  
  /* 버튼 크기 */
  .task-row button{ min-width:44px; min-height:44px; }
  .task-row .del, .task-row .check{ white-space:nowrap; }
  
  /* 반응형 */
  @media (max-width: 768px){
    .app{
      grid-template-columns: 1fr;
      grid-template-rows: var(--top-h) 1fr;
      grid-template-areas:
        "topbar"
        "main";
    }
    .sidebar{ display:none }
    .hamburger{ display:flex }
    .sidebar-drawer{ display:flex }
    body.menu-open .sidebar-drawer{ transform:none }
    body.menu-open .backdrop{ opacity:1; pointer-events:auto }
  }
  
  /* 아이폰: 툴바 한 줄로 보이게 */
  @media (max-width: 480px){
    .todo-toolbar{ flex-wrap:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch; gap:4px; }
    .todo-toolbar button{ font-size:13px; padding:6px 10px; border-radius:6px; flex:1; min-width:0; }
  
    /* 카드 압축 */
    .task-row{
      grid-template-columns: 36px 1fr 36px;
      gap:4px 8px;
      padding:8px;
      border-radius:10px;
    }
    .task-row button{ min-width:36px; min-height:36px; padding:6px 8px; border-radius:8px; }
    .task-row .meta{ font-size:11.5px; gap:6px; }
  }
  
  /* 접근성 */
  a:focus-visible, button:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; border-radius:8px }
  @media (prefers-reduced-motion: reduce){
    .sidebar-drawer, .backdrop{ transition:none }
  }